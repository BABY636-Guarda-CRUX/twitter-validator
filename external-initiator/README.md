# Chainlink External Initiator

## Development

#### Install dependencies

```shell script
yarn install
```

#### Run development server

```shell script
yarn dev
```

#### Run tests

```shell script
yarn test
```

## Production

#### Build for production

```shell script
yarn build
```

#### Run production server

```shell script
node `dist/index.js`
```

#### Authentication

Provide Authentication Token via `X-Chainlink-EA-AccessKey` **header** and
Authentication Secret via `X-Chainlink-EA-Secret` **header** for each request.

## Environment variables reference

#### The following environment variables need to be set:

| Name                      | Description                                                                                                                                                                                                                                           | Required             |
| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------- |
| `CHAINLINK_ACCESS_KEY`    | Access key generated by Chainlink Node when creating new external adapter                                                                                                                                                                             | `Yes`                |
| `CHAINLINK_ACCESS_SECRET` | Secret generated by Chainlink Node when creating new external adapter                                                                                                                                                                                 | `Yes`                |
| `CHAINLINK_JOB_ID`        | ID of job created on Chainlink Node. External initiator will initiate this job when get incoming request                                                                                                                                              | `Yes`                |
| `CHAINLINK_NODE_URL`      | Chainlink Node URL                                                                                                                                                                                                                                    | `Yes`                |
| `AUTHENTICATION_TOKEN`    | Token used by External Adapter to authenticate all incoming requests. Usage of the Outgoing Token generated by Chainlink Node is recommended. Provide this token via `X-Chainlink-EA-AccessKey` header to authorize.                                  | `Yes`                |
| `AUTHENTICATION_SECRET`   | This secret used with `AUTHENTICATION_TOKEN` by External Adapter to authenticate all incoming requests. Usage of the Outgoing Secret generated by Chainlink Node is recommended. Provide this secret via `X-Chainlink-EA-Secret` header to authorize. | `Yes`                |
| `LISTEN_HTTP_PORT`        | Port for handling incoming HTTP requests                                                                                                                                                                                                              | `No` `Default: 3000` |

[Test environment varibles example](./test.env)
